!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("d3scaleCluster",[],t):"object"==typeof exports?exports.d3scaleCluster=t():n.d3scaleCluster=t()}(this,function(){return function(n){function t(e){if(r[e])return r[e].exports;var o=r[e]={exports:{},id:e,loaded:!1};return n[e].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=n,t.c=r,t.p="",t(0)}([function(n,t,r){function e(){function n(){if(!(i.length<=2)){var n=o(r,Math.min(r.length,i.length));t=0!==n.length,u=[];for(var e=0;e<n.length;e++)u.push(n[e])}}var t=!1,r=[],i=[],u=[],a=function(n){if(t){for(var r=u.length-1;r>=0;r--)if(n>=u[r])return i[r];return i[0]}};return a.domain=function(){return arguments.length?(r=arguments[0],n(),a):r},a.range=function(){if(arguments.length){var t=arguments[0],r=t.length!==i.length;return i=t,r&&n(),a}return i},a.invertExtent=function(n){for(var t=NaN,r=NaN,e=0;e<i.length;e++)if(i[e]===n){t=u[e],r=e+1<i.length?u[e+1]:NaN;break}return[t,r]},a.clusters=function(){return u.slice(1)},a.export=function(){return{isReady:t,domain:r,range:i,breakpoints:u}},a.import=function(n){if(!n)throw new Error("Import requires parameters");return t=n.isReady,r=n.domain,i=n.range,u=n.breakpoints,a},a.copy=function(){return e().domain(r).range(i)},a}var o=r(1);"object"==typeof d3&&(d3.scaleCluster=e),n.exports=e},function(n,t,r){(function(t){var e,o=r(3);"undefined"!=typeof t&&t&&t.version&&parseInt(t.version.substr(1,1))>=8?(e=r(!function(){var n=new Error('Cannot find module "./ckmeans-native"');throw n.code="MODULE_NOT_FOUND",n}()),n.exports=function(n,t){return n.length>200&&t<n.length&&t>1?e.ckmeans(n,t):o(n,t)}):n.exports=o}).call(t,r(2))},function(n,t){function r(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function o(n){if(s===setTimeout)return setTimeout(n,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(n,0);try{return s(n,0)}catch(t){try{return s.call(null,n,0)}catch(t){return s.call(this,n,0)}}}function i(n){if(l===clearTimeout)return clearTimeout(n);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(n);try{return l(n)}catch(t){try{return l.call(null,n)}catch(t){return l.call(this,n)}}}function u(){v&&p&&(v=!1,p.length?d=p.concat(d):m=-1,d.length&&a())}function a(){if(!v){var n=o(u);v=!0;for(var t=d.length;t;){for(p=d,d=[];++m<t;)p&&p[m].run();m=-1,t=d.length}p=null,v=!1,i(n)}}function c(n,t){this.fun=n,this.array=t}function f(){}var s,l,h=n.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(n){s=r}try{l="function"==typeof clearTimeout?clearTimeout:e}catch(n){l=e}}();var p,d=[],v=!1,m=-1;h.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new c(n,t)),1!==d.length||v||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.prependListener=f,h.prependOnceListener=f,h.listeners=function(n){return[]},h.binding=function(n){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(n){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(n,t){function r(n){return n.slice().sort(function(n,t){return n-t})}function e(n){for(var t,r=0,e=0;e<n.length;e++)0!==e&&n[e]===t||(t=n[e],r++);return r}function o(n,t){for(var r=[],e=0;e<n;e++){for(var o=[],i=0;i<t;i++)o.push(0);r.push(o)}return r}function i(n,t,r,e){var o;if(n>0){var i=(r[t]-r[n-1])/(t-n+1);o=e[t]-e[n-1]-(t-n+1)*i*i}else o=e[t]-r[t]*r[t]/(t+1);return o<0?0:o}function u(n,t,r,e,o,a,c){if(!(n>t)){var f=Math.floor((n+t)/2);e[r][f]=e[r-1][f-1],o[r][f]=f;var s=r;n>r&&(s=Math.max(s,o[r][n-1]||0)),s=Math.max(s,o[r-1][f]||0);var l=f-1;t<e.length-1&&(l=Math.min(l,o[r][t+1]||0));for(var h,p,d,v,m=l;m>=s&&(h=i(m,f,a,c),!(h+e[r-1][s-1]>=e[r][f]));--m)p=i(s,f,a,c),d=p+e[r-1][s-1],d<e[r][f]&&(e[r][f]=d,o[r][f]=s),s++,v=h+e[r-1][m-1],v<e[r][f]&&(e[r][f]=v,o[r][f]=m);u(n,f-1,r,e,o,a,c),u(f+1,t,r,e,o,a,c)}}function a(n,t,r){for(var e=t[0].length,o=new Array(e),a=new Array(e),c=n[Math.floor(e/2)],f=0;f<e;++f)0===f?(o[0]=n[0]-c,a[0]=(n[0]-c)*(n[0]-c)):(o[f]=o[f-1]+n[f]-c,a[f]=a[f-1]+(n[f]-c)*(n[f]-c)),t[0][f]=i(0,f,o,a),r[0][f]=0;for(var s,l=1;l<t.length;++l)s=l<t.length-1?l:e-1,u(s,e-1,l,t,r,o,a)}function c(n,t){if(t>n.length)throw new Error("Cannot generate more classes than there are data values");var i=n.length,u=r(n),c=e(u);if(1===c)return[u];t=Math.min(c,t);var f=o(t,i),s=o(t,i);a(u,f,s);for(var l=[],h=s[0].length-1,p=s.length-1;p>=0;p--){var d=s[p][h];l[p]=u[d],p>0&&(h=d-1)}return l}n.exports=c}])});